{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/lib/store/userStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ntype UserProfile = {\n  name: string;\n  age: string;\n  gender: string;\n  weight: string; // Needed for Water Goal\n  isDiabetic: string;\n  hasHypertension: string;\n  existingConditions: string;\n  isAssessmentDone: boolean;\n};\n\n// New Structure for Meds\ntype Medication = {\n  id: string;\n  name: string;\n  taken: boolean; // True = Checked, False = Unchecked\n};\n\ntype TrackerState = {\n  lastResetDate: string; // To track when to reset daily stats\n  water: number;\n  meds: Medication[]; // Changed from string[] to Object[]\n  vaccines: string[];\n  periodDate: string | null;\n};\n\ntype UserState = {\n  profile: UserProfile;\n  trackers: TrackerState;\n  \n  setProfile: (data: Partial<UserProfile>) => void;\n  completeAssessment: () => void;\n  \n  // Actions\n  checkDailyReset: () => void; // Checks if it's a new day\n  addWater: (amount?: number) => void;\n  \n  addMed: (name: string) => void;\n  toggleMed: (id: string, status?: boolean) => void; // Manual or Agent toggle\n  removeMed: (id: string) => void;\n  \n  addVaccine: (name: string) => void;\n  removeVaccine: (name: string) => void;\n  setPeriodDate: (date: string) => void;\n  \n  getWaterGoal: () => number; // Helper to calculate goal\n};\n\nexport const useUserStore = create<UserState>()(\n  persist(\n    (set, get) => ({\n      profile: {\n        name: '', age: '', gender: '', weight: '', isDiabetic: 'No', \n        hasHypertension: 'No', existingConditions: '', isAssessmentDone: false\n      },\n      trackers: {\n        lastResetDate: new Date().toDateString(),\n        water: 0,\n        meds: [],\n        vaccines: [],\n        periodDate: null\n      },\n      \n      setProfile: (data) => set((state) => ({ profile: { ...state.profile, ...data } })),\n      completeAssessment: () => set((state) => ({ profile: { ...state.profile, isAssessmentDone: true } })),\n      \n      // --- LOGIC: Check for New Day ---\n      checkDailyReset: () => {\n        const today = new Date().toDateString();\n        const { lastResetDate, meds } = get().trackers;\n\n        if (lastResetDate !== today) {\n          // It's a new day! Reset Water and uncheck all Meds\n          set((state) => ({\n            trackers: {\n              ...state.trackers,\n              lastResetDate: today,\n              water: 0,\n              meds: state.trackers.meds.map(m => ({ ...m, taken: false })) // Uncheck all\n            }\n          }));\n        }\n      },\n\n      // --- LOGIC: Dynamic Water Goal ---\n      getWaterGoal: () => {\n        const weight = parseInt(get().profile.weight) || 60; // Default 60kg if missing\n        // Formula: 35ml per kg of body weight\n        return weight * 35;\n      },\n\n      addWater: (amount = 250) => set((state) => ({ \n        trackers: { ...state.trackers, water: state.trackers.water + amount } \n      })),\n\n      // --- MEDS LOGIC ---\n      addMed: (name) => set((state) => ({ \n        trackers: { \n          ...state.trackers, \n          meds: [...state.trackers.meds, { id: Date.now().toString(), name, taken: false }] \n        } \n      })),\n      \n      toggleMed: (id, status) => set((state) => ({\n        trackers: {\n          ...state.trackers,\n          meds: state.trackers.meds.map(m => \n            m.id === id ? { ...m, taken: status !== undefined ? status : !m.taken } : m\n          )\n        }\n      })),\n\n      removeMed: (id) => set((state) => ({\n        trackers: { ...state.trackers, meds: state.trackers.meds.filter(m => m.id !== id) }\n      })),\n\n      // --- VACCINES (Persistent) ---\n      addVaccine: (name) => set((state) => ({ \n        trackers: { ...state.trackers, vaccines: [...state.trackers.vaccines, name] } \n      })),\n      removeVaccine: (name) => set((state) => ({\n        trackers: { ...state.trackers, vaccines: state.trackers.vaccines.filter(v => v !== name) }\n      })),\n\n      setPeriodDate: (date) => set((state) => ({ \n        trackers: { ...state.trackers, periodDate: date } \n      })),\n    }),\n    { name: 'pranaya-storage' }\n  )\n);"],"names":[],"mappings":"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"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://127.0.0.1:8000';\n\nexport const api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// --- UPDATED FOR VISION ---\nexport const sendChatMessage = async (\n  message: string, \n  userId: string = \"guest\", \n  history: string[] = [], \n  gender: string = \"Unknown\",\n  image: string | null = null // <--- Added Image Argument\n) => {\n  try {\n    const response = await api.post('/chat', {\n      message,\n      user_id: userId,\n      history,\n      gender,\n      image // <--- Send to Backend\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"API Error:\", error);\n    return null;\n  }\n};\n\nexport const checkServerHealth = async () => {\n  try {\n    const response = await api.get('/');\n    return response.data.status === \"online\";\n  } catch (error) {\n    return false;\n  }\n};"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,UAAU;AAET,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,kBAAkB,OAC7B,SACA,SAAiB,OAAO,EACxB,UAAoB,EAAE,EACtB,SAAiB,SAAS,EAC1B,QAAuB,KAAK,4BAA4B;AAA7B;IAE3B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,SAAS;YACvC;YACA,SAAS;YACT;YACA;YACA;QACF;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO;IACT;AACF;AAEO,MAAM,oBAAoB;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO,SAAS,IAAI,CAAC,MAAM,KAAK;IAClC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/components/EmergencyOverlay.tsx"],"sourcesContent":["import { AlertTriangle, Phone } from 'lucide-react';\n\ninterface Props {\n  active: boolean;\n  onClose: () => void;\n}\n\nexport default function EmergencyOverlay({ active, onClose }: Props) {\n  if (!active) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-red-600 animate-pulse flex flex-col items-center justify-center text-white p-8\">\n      \n      {/* Blinking Icon */}\n      <div className=\"bg-white text-red-600 rounded-full p-6 mb-6 animate-bounce\">\n        <AlertTriangle size={64} strokeWidth={3} />\n      </div>\n\n      <h1 className=\"text-5xl font-black mb-4 text-center uppercase tracking-widest\">\n        Medical Emergency Detected\n      </h1>\n      \n      <p className=\"text-2xl mb-8 text-center max-w-2xl font-semibold\">\n        Your symptoms indicate a critical condition. Please seek immediate professional help.\n      </p>\n\n      {/* Action Buttons */}\n      <div className=\"flex gap-6 flex-col md:flex-row w-full max-w-lg\">\n        <button \n          onClick={() => window.open('tel:112')} \n          className=\"flex-1 bg-white text-red-700 py-6 rounded-xl text-2xl font-bold flex items-center justify-center gap-3 hover:bg-gray-100 transition shadow-xl\"\n        >\n          <Phone size={32} />\n          Call Ambulance\n        </button>\n        \n        <button \n          onClick={() => window.open('https://www.google.com/maps/search/hospitals+near+me', '_blank')}\n          className=\"flex-1 bg-red-800 border-2 border-white text-white py-6 rounded-xl text-2xl font-bold flex items-center justify-center hover:bg-red-900 transition shadow-xl\"\n        >\n          Find Hospital\n        </button>\n      </div>\n\n      <button \n        onClick={onClose}\n        className=\"mt-12 text-white/70 hover:text-white underline\"\n      >\n        I am safe, dismiss alert\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;;;AAOe,SAAS,iBAAiB,EAAE,MAAM,EAAE,OAAO,EAAS;IACjE,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;;0BAGb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,4OAAa;oBAAC,MAAM;oBAAI,aAAa;;;;;;;;;;;0BAGxC,6LAAC;gBAAG,WAAU;0BAAiE;;;;;;0BAI/E,6LAAC;gBAAE,WAAU;0BAAoD;;;;;;0BAKjE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;;0CAEV,6LAAC,gNAAK;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAIrB,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC,wDAAwD;wBACnF,WAAU;kCACX;;;;;;;;;;;;0BAKH,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP;KA7CwB"}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/components/HealthDrawer.tsx"],"sourcesContent":["'use client';\nimport { useEffect, useState } from 'react';\nimport { X, Droplets, Pill, Syringe, CalendarHeart, Plus, Trash2, CheckCircle2, Circle } from 'lucide-react';\nimport { useUserStore } from '@/lib/store/userStore';\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n}\n\nexport default function HealthDrawer({ isOpen, onClose }: Props) {\n  const { profile, trackers, addWater, addMed, toggleMed, removeMed, addVaccine, removeVaccine, getWaterGoal, checkDailyReset } = useUserStore();\n  \n  // Local state for inputs\n  const [newMed, setNewMed] = useState('');\n  const [newVac, setNewVac] = useState('');\n\n  // Check for day reset every time drawer opens\n  useEffect(() => {\n    if (isOpen) checkDailyReset();\n  }, [isOpen, checkDailyReset]);\n\n  if (!isOpen) return null;\n\n  // Calculate Dynamic Goal\n  const dailyGoal = getWaterGoal(); \n  const percentage = Math.min((trackers.water / dailyGoal) * 100, 100);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-end\">\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-sm\" onClick={onClose}></div>\n      <div className=\"relative w-full max-w-md bg-white h-full shadow-2xl p-6 overflow-y-auto animate-in slide-in-from-right duration-300\">\n        \n        {/* Header */}\n        <div className=\"flex justify-between items-center mb-8\">\n          <div>\n            <h2 className=\"text-2xl font-bold text-gray-900\">Health Data</h2>\n            <p className=\"text-xs text-gray-500\">Auto-Goal for {profile.weight}kg: {dailyGoal}ml</p>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-gray-100 rounded-full\"><X size={24} /></button>\n        </div>\n\n        <div className=\"space-y-8\">\n          \n          {/* 1. Water Tracker */}\n          <div className=\"bg-blue-50 p-5 rounded-2xl border border-blue-100\">\n             <div className=\"flex justify-between items-start mb-2\">\n               <div className=\"flex items-center gap-2 text-blue-800 font-bold\"><Droplets size={20} /> Hydration</div>\n               <div className=\"text-right\">\n                 <span className=\"text-3xl font-black text-blue-600\">{trackers.water}</span>\n                 <span className=\"text-sm text-blue-400 font-medium\"> / {dailyGoal}ml</span>\n               </div>\n             </div>\n             <div className=\"w-full bg-blue-200 h-2 rounded-full mb-4 overflow-hidden\">\n                <div className=\"bg-blue-600 h-full transition-all duration-500\" style={{ width: `${percentage}%` }}></div>\n             </div>\n             <button onClick={() => addWater(250)} className=\"w-full bg-blue-600 text-white py-2 rounded-lg font-medium hover:bg-blue-700 flex items-center justify-center gap-2\"><Plus size={16} /> Add Glass (250ml)</button>\n          </div>\n\n          {/* 2. Meds Checklist */}\n          <div className=\"bg-red-50 p-5 rounded-2xl border border-red-100\">\n             <div className=\"flex items-center justify-between text-red-800 font-bold mb-4\">\n                 <div className=\"flex items-center gap-2\"><Pill size={20} /> Daily Meds</div>\n                 <span className=\"text-xs font-normal bg-white px-2 py-1 rounded border border-red-100\">Resets Daily</span>\n             </div>\n             \n             <ul className=\"space-y-2 mb-4\">\n                {trackers.meds.length === 0 ? <li className=\"text-gray-400 italic text-sm\">No meds added.</li> : \n                 trackers.meds.map((m) => (\n                   <li key={m.id} className={`flex items-center justify-between p-3 rounded border transition-all ${m.taken ? 'bg-green-50 border-green-200' : 'bg-white border-red-100'}`}>\n                      <button onClick={() => toggleMed(m.id)} className=\"flex items-center gap-3 flex-1 text-left\">\n                        {m.taken ? <CheckCircle2 className=\"text-green-600\" size={20} /> : <Circle className=\"text-gray-300\" size={20} />}\n                        <span className={`text-sm font-medium ${m.taken ? 'text-green-800 line-through' : 'text-gray-800'}`}>{m.name}</span>\n                      </button>\n                      <button onClick={() => removeMed(m.id)} className=\"text-gray-400 hover:text-red-500\"><Trash2 size={16} /></button>\n                   </li>\n                 ))}\n             </ul>\n\n             {/* Add Med Input */}\n             <div className=\"flex gap-2\">\n               <input \n                 type=\"text\" placeholder=\"Add medication...\" className=\"flex-1 text-sm p-2 border rounded\"\n                 value={newMed} onChange={(e) => setNewMed(e.target.value)}\n                 onKeyDown={(e) => e.key === 'Enter' && newMed && (addMed(newMed), setNewMed(''))}\n               />\n               <button onClick={() => { if(newMed) { addMed(newMed); setNewMed(''); }}} className=\"bg-red-600 text-white p-2 rounded hover:bg-red-700\"><Plus size={18} /></button>\n             </div>\n          </div>\n\n          {/* 3. Vaccines (Persistent) */}\n          <div className=\"bg-green-50 p-5 rounded-2xl border border-green-100\">\n             <div className=\"flex items-center gap-2 text-green-800 font-bold mb-4\"><Syringe size={20} /> Vaccines</div>\n             <ul className=\"space-y-2 mb-4\">\n                {trackers.vaccines.length === 0 ? <li className=\"text-gray-400 italic text-sm\">No records.</li> : \n                 trackers.vaccines.map((v) => (\n                   <li key={v} className=\"flex justify-between items-center text-sm text-green-700 bg-white p-2 rounded border border-green-100\">\n                     <span>{v}</span>\n                     <button onClick={() => removeVaccine(v)} className=\"text-gray-400 hover:text-red-500\"><Trash2 size={14} /></button>\n                   </li>\n                 ))}\n             </ul>\n             <div className=\"flex gap-2\">\n               <input \n                 type=\"text\" placeholder=\"Add vaccine...\" className=\"flex-1 text-sm p-2 border rounded\"\n                 value={newVac} onChange={(e) => setNewVac(e.target.value)}\n                 onKeyDown={(e) => e.key === 'Enter' && newVac && (addVaccine(newVac), setNewVac(''))}\n               />\n               <button onClick={() => { if(newVac) { addVaccine(newVac); setNewVac(''); }}} className=\"bg-green-600 text-white p-2 rounded hover:bg-green-700\"><Plus size={18} /></button>\n             </div>\n          </div>\n\n          {/* 4. Period */}\n          {profile.gender === 'Female' && (\n             <div className=\"bg-pink-50 p-5 rounded-2xl border border-pink-100\">\n               <div className=\"flex items-center gap-2 text-pink-800 font-bold mb-2\"><CalendarHeart size={20} /> Cycle Tracker</div>\n               <div className=\"text-2xl font-bold text-pink-600\">{trackers.periodDate || 'Not Logged'}</div>\n             </div>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 835, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation'; \nimport { useUserStore } from '@/lib/store/userStore'; \nimport { sendChatMessage } from '@/lib/api';\nimport EmergencyOverlay from '@/app/components/EmergencyOverlay';\nimport HealthDrawer from '@/app/components/HealthDrawer'; \nimport { Send, Activity, ShieldCheck, Info, Check, X, ClipboardCheck, LayoutDashboard, Paperclip, FileImage } from 'lucide-react';\n\ntype Message = {\n  role: 'user' | 'bot';\n  content: string;\n  type?: 'text' | 'diagnosis' | 'emergency' | 'myth' | 'tracker_log'; \n  data?: any; \n  image?: string; \n};\n\nexport default function ChatPage() {\n  const router = useRouter();\n  \n  // 1. Get Actions from Store\n  const { profile, addWater, addMed, toggleMed, addVaccine, setPeriodDate } = useUserStore();\n\n  const [input, setInput] = useState('');\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  \n  const [messages, setMessages] = useState<Message[]>([\n    { role: 'bot', content: `Hello ${profile.name}! I have your medical profile ready. You can describe symptoms, ask questions, log data, or upload a medical report.` }\n  ]);\n  const [loading, setLoading] = useState(false);\n  \n  const [isEmergency, setIsEmergency] = useState(false);\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false); \n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  useEffect(() => {\n    if (!profile.isAssessmentDone) {\n        router.push('/assessment');\n    }\n  }, [profile.isAssessmentDone, router]);\n\n  const scrollToBottom = () => { messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); };\n  useEffect(() => { scrollToBottom(); }, [messages]);\n\n  // --- HANDLE IMAGE ---\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n        const reader = new FileReader();\n        reader.onloadend = () => setSelectedImage(reader.result as string);\n        reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSend = async () => {\n    if (!input.trim() && !selectedImage) return;\n    \n    const userMsg = input;\n    const imageToSend = selectedImage; \n    \n    setInput('');\n    setSelectedImage(null);\n\n    // --- CONTEXT ---\n    const userContextString = `[PROFILE] Name:${profile.name}, Age:${profile.age}, Weight:${profile.weight}, Gender:${profile.gender}, Diabetic:${profile.isDiabetic}`;\n    const historyContext = messages.map(m => `${m.role === 'user' ? 'User' : 'Bot'}: ${m.content}`);\n    const fullContext = [userContextString, ...historyContext];\n    \n    setMessages(prev => [...prev, { \n        role: 'user', \n        content: userMsg || \"Analyzed this image:\", \n        image: imageToSend || undefined \n    }]);\n    \n    setLoading(true);\n\n    const response = await sendChatMessage(userMsg, \"guest\", fullContext, profile.gender, imageToSend);\n    setLoading(false);\n\n    if (response) {\n      // --- ðŸ§  SMART TRACKER LOGIC ---\n      if (response.routed_to === 'tracker') {\n          // ðŸ›‘ SAFETY CHECK: Ensure data exists before using it\n          const data = response.response?.data; \n          \n          if (data) {\n              // 1. WATER\n              if (data.category === 'water') {\n                 let amount = 250;\n                 if (data.quantity) {\n                     const parsed = parseInt(data.quantity.toString().replace(/\\D/g, ''));\n                     if (!isNaN(parsed)) amount = parsed;\n                 }\n                 addWater(amount);\n              }\n\n              // 2. MEDICINE\n              if (data.category === 'medicine') {\n                 const medName = data.item || 'Medicine';\n                 \n                 const currentMeds = useUserStore.getState().trackers.meds || [];\n                 const existingMed = currentMeds.find(m => \n                    typeof m === 'object' && m.name && m.name.toLowerCase().includes(medName.toLowerCase())\n                 );\n                 \n                 if (existingMed) {\n                     toggleMed(existingMed.id, true); // Mark taken\n                 } else {\n                     addMed(medName); // Add new\n                 }\n              }\n\n              // 3. VACCINE\n              if (data.category === 'vaccine') addVaccine(data.item || 'Vaccine');\n              \n              // 4. PERIOD\n              if (data.category === 'period') {\n                 const dateToLog = data.item || 'Today';\n                 setPeriodDate(dateToLog);\n              }\n\n              setMessages(prev => [...prev, { \n                  role: 'bot', \n                  content: response.response.message || \"Logged successfully.\", \n                  type: 'tracker_log'\n              }]);\n          } else {\n              setMessages(prev => [...prev, { role: 'bot', content: \"I've noted that down.\" }]);\n          }\n      }\n      else if (response.routed_to === 'emergency') {\n        setIsEmergency(true);\n        setMessages(prev => [...prev, { role: 'bot', content: response.response.message, type: 'emergency' }]);\n      } \n      else if (response.routed_to === 'diagnosis') {\n        const report = response.response.data;\n        setMessages(prev => [...prev, { role: 'bot', content: report.immediate_advice, type: 'diagnosis', data: report }]);\n      } \n      else if (response.routed_to === 'myth_buster') {\n        const factCheck = response.response.data;\n        setMessages(prev => [...prev, { role: 'bot', content: factCheck.explanation, type: 'myth', data: factCheck }]);\n      }\n      else {\n        // Standard Chat / Vision Response\n        setMessages(prev => [...prev, { role: 'bot', content: response.response.message }]);\n      }\n    }\n  };\n\n  if (!profile.isAssessmentDone) {\n    return <div className=\"flex items-center justify-center h-screen text-blue-600 font-bold\">Loading Profile...</div>;\n  }\n\n  return (\n    <div className=\"flex flex-col h-screen bg-gray-50 relative overflow-hidden\">\n      \n      <EmergencyOverlay active={isEmergency} onClose={() => setIsEmergency(false)} />\n      <HealthDrawer isOpen={isDrawerOpen} onClose={() => setIsDrawerOpen(false)} />\n\n      {/* Header */}\n      <div className=\"p-4 bg-white border-b flex items-center justify-between shadow-sm z-10\">\n        <h1 className=\"font-bold text-xl text-blue-600 flex items-center gap-2\">\n            <Activity className=\"w-6 h-6\" /> Pranaya\n        </h1>\n        \n        <button onClick={() => setIsDrawerOpen(true)} className=\"bg-blue-100 text-blue-700 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-blue-200 transition\">\n          <LayoutDashboard size={18} /> My Health Data\n        </button>\n      </div>\n\n      {/* Chat Area */}\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-6 max-w-4xl mx-auto w-full\">\n        {messages.map((m, i) => (\n          <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n            <div className={`max-w-[85%] p-4 rounded-2xl shadow-sm ${\n              m.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white border rounded-bl-none text-gray-800'\n            }`}>\n              \n              {/* Image Preview */}\n              {m.image && (\n                  <img src={m.image} alt=\"Upload\" className=\"max-w-full h-auto rounded-lg mb-2 border border-white/20\" />\n              )}\n\n              {/* Status Headers */}\n              {m.type === 'tracker_log' && <div className=\"flex items-center gap-2 text-green-700 font-bold mb-2 pb-2 border-b border-green-100\"><ClipboardCheck size={20} /> Data Saved</div>}\n              {m.type === 'myth' && m.data && <div className=\"mb-3 border-b pb-3 font-bold text-lg flex items-center gap-2\">{m.data.verdict === 'FACT' ? <Check className=\"text-green-600\"/> : <X className=\"text-red-600\"/>}{m.data.verdict}</div>}\n\n              {/* --- ðŸŸ¢ THIS IS THE FIX: HTML RENDERER --- */}\n              <div \n                className=\"whitespace-pre-wrap leading-relaxed text-gray-800 text-sm [&>h3]:font-bold [&>h3]:text-blue-800 [&>h3]:mt-4 [&>h3]:mb-2 [&>h3]:text-lg [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-1 [&>b]:font-black\"\n                dangerouslySetInnerHTML={{ __html: m.content }}\n              />\n              \n              {/* Diagnosis Cards */}\n              {m.type === 'diagnosis' && m.data && (\n                <div className=\"mt-4 bg-blue-50 rounded-xl p-3 border border-blue-100\">\n                   <div className=\"font-bold text-blue-800 mb-2\">Potential Conditions:</div>\n                   {m.data.potential_conditions.map((c:any, idx:number) => (\n                     <div key={idx} className=\"bg-white p-2 rounded mb-2 text-sm border border-blue-100\">\n                       {idx+1}. {c.name} <span className=\"text-xs bg-gray-100 px-1 rounded\">{c.likelihood}</span>\n                     </div>\n                   ))}\n                </div>\n              )}\n            </div>\n          </div>\n        ))}\n        {loading && <div className=\"text-gray-400 text-sm ml-4 animate-pulse\">Pranaya is processing...</div>}\n        <div ref={messagesEndRef} />\n      </div>\n\n      {/* Input Area */}\n      <div className=\"p-4 bg-white border-t z-10\">\n        {selectedImage && (\n            <div className=\"flex items-center gap-2 bg-gray-100 p-2 rounded-lg mb-2 max-w-fit animate-in slide-in-from-bottom\">\n                <FileImage size={20} className=\"text-blue-600\" />\n                <span className=\"text-xs text-gray-600\">Image attached</span>\n                <button onClick={() => setSelectedImage(null)} className=\"ml-2 text-gray-400 hover:text-red-500\"><X size={16}/></button>\n            </div>\n        )}\n\n        <div className=\"flex gap-2 max-w-4xl mx-auto items-center\">\n          <input type=\"file\" ref={fileInputRef} onChange={handleFileSelect} accept=\"image/*\" className=\"hidden\" />\n          \n          <button onClick={() => fileInputRef.current?.click()} className=\"p-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200 transition\">\n            <Paperclip size={20} />\n          </button>\n\n          <input \n            type=\"text\" value={input}\n            onChange={(e) => setInput(e.target.value)}\n            onKeyDown={(e) => e.key === 'Enter' && handleSend()}\n            placeholder=\"Type symptoms or log data...\"\n            className=\"flex-1 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50\"\n          />\n          <button onClick={handleSend} disabled={loading} className=\"p-3 bg-blue-600 text-white rounded-xl\">\n            <Send size={24} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}