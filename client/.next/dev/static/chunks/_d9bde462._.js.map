{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/lib/store/userStore.ts"],"sourcesContent":["import { create } from 'zustand';\nimport { persist } from 'zustand/middleware';\n\ntype UserProfile = {\n  name: string;\n  age: string;\n  gender: string;\n  weight: string; // Needed for Water Goal\n  isDiabetic: string;\n  hasHypertension: string;\n  existingConditions: string;\n  isAssessmentDone: boolean;\n};\n\n// New Structure for Meds\ntype Medication = {\n  id: string;\n  name: string;\n  taken: boolean; // True = Checked, False = Unchecked\n};\n\ntype TrackerState = {\n  lastResetDate: string; // To track when to reset daily stats\n  water: number;\n  meds: Medication[]; // Changed from string[] to Object[]\n  vaccines: string[];\n  periodDate: string | null;\n};\n\ntype UserState = {\n  profile: UserProfile;\n  trackers: TrackerState;\n  \n  setProfile: (data: Partial<UserProfile>) => void;\n  completeAssessment: () => void;\n  \n  // Actions\n  checkDailyReset: () => void; // Checks if it's a new day\n  addWater: (amount?: number) => void;\n  \n  addMed: (name: string) => void;\n  toggleMed: (id: string, status?: boolean) => void; // Manual or Agent toggle\n  removeMed: (id: string) => void;\n  \n  addVaccine: (name: string) => void;\n  removeVaccine: (name: string) => void;\n  setPeriodDate: (date: string) => void;\n  \n  getWaterGoal: () => number; // Helper to calculate goal\n};\n\nexport const useUserStore = create<UserState>()(\n  persist(\n    (set, get) => ({\n      profile: {\n        name: '', age: '', gender: '', weight: '', isDiabetic: 'No', \n        hasHypertension: 'No', existingConditions: '', isAssessmentDone: false\n      },\n      trackers: {\n        lastResetDate: new Date().toDateString(),\n        water: 0,\n        meds: [],\n        vaccines: [],\n        periodDate: null\n      },\n      \n      setProfile: (data) => set((state) => ({ profile: { ...state.profile, ...data } })),\n      completeAssessment: () => set((state) => ({ profile: { ...state.profile, isAssessmentDone: true } })),\n      \n      // --- LOGIC: Check for New Day ---\n      checkDailyReset: () => {\n        const today = new Date().toDateString();\n        const { lastResetDate, meds } = get().trackers;\n\n        if (lastResetDate !== today) {\n          // It's a new day! Reset Water and uncheck all Meds\n          set((state) => ({\n            trackers: {\n              ...state.trackers,\n              lastResetDate: today,\n              water: 0,\n              meds: state.trackers.meds.map(m => ({ ...m, taken: false })) // Uncheck all\n            }\n          }));\n        }\n      },\n\n      // --- LOGIC: Dynamic Water Goal ---\n      getWaterGoal: () => {\n        const weight = parseInt(get().profile.weight) || 60; // Default 60kg if missing\n        // Formula: 35ml per kg of body weight\n        return weight * 35;\n      },\n\n      addWater: (amount = 250) => set((state) => ({ \n        trackers: { ...state.trackers, water: state.trackers.water + amount } \n      })),\n\n      // --- MEDS LOGIC ---\n      addMed: (name) => set((state) => ({ \n        trackers: { \n          ...state.trackers, \n          meds: [...state.trackers.meds, { id: Date.now().toString(), name, taken: false }] \n        } \n      })),\n      \n      toggleMed: (id, status) => set((state) => ({\n        trackers: {\n          ...state.trackers,\n          meds: state.trackers.meds.map(m => \n            m.id === id ? { ...m, taken: status !== undefined ? status : !m.taken } : m\n          )\n        }\n      })),\n\n      removeMed: (id) => set((state) => ({\n        trackers: { ...state.trackers, meds: state.trackers.meds.filter(m => m.id !== id) }\n      })),\n\n      // --- VACCINES (Persistent) ---\n      addVaccine: (name) => set((state) => ({ \n        trackers: { ...state.trackers, vaccines: [...state.trackers.vaccines, name] } \n      })),\n      removeVaccine: (name) => set((state) => ({\n        trackers: { ...state.trackers, vaccines: state.trackers.vaccines.filter(v => v !== name) }\n      })),\n\n      setPeriodDate: (date) => set((state) => ({ \n        trackers: { ...state.trackers, periodDate: date } \n      })),\n    }),\n    { name: 'pranaya-storage' }\n  )\n);"],"names":[],"mappings":"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"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/lib/api.ts"],"sourcesContent":["import axios from 'axios';\n\nconst API_URL = 'http://127.0.0.1:8000';\n\nexport const api = axios.create({\n  baseURL: API_URL,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// --- UPDATED FOR VISION ---\nexport const sendChatMessage = async (\n  message: string, \n  userId: string = \"guest\", \n  history: string[] = [], \n  gender: string = \"Unknown\",\n  image: string | null = null // <--- Added Image Argument\n) => {\n  try {\n    const response = await api.post('/chat', {\n      message,\n      user_id: userId,\n      history,\n      gender,\n      image // <--- Send to Backend\n    });\n    return response.data;\n  } catch (error) {\n    console.error(\"API Error:\", error);\n    return null;\n  }\n};\n\nexport const checkServerHealth = async () => {\n  try {\n    const response = await api.get('/');\n    return response.data.status === \"online\";\n  } catch (error) {\n    return false;\n  }\n};"],"names":[],"mappings":";;;;;;;;AAAA;;AAEA,MAAM,UAAU;AAET,MAAM,MAAM,mJAAK,CAAC,MAAM,CAAC;IAC9B,SAAS;IACT,SAAS;QACP,gBAAgB;IAClB;AACF;AAGO,MAAM,kBAAkB,OAC7B,SACA,SAAiB,OAAO,EACxB,UAAoB,EAAE,EACtB,SAAiB,SAAS,EAC1B,QAAuB,KAAK,4BAA4B;AAA7B;IAE3B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,IAAI,CAAC,SAAS;YACvC;YACA,SAAS;YACT;YACA;YACA;QACF;QACA,OAAO,SAAS,IAAI;IACtB,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,cAAc;QAC5B,OAAO;IACT;AACF;AAEO,MAAM,oBAAoB;IAC/B,IAAI;QACF,MAAM,WAAW,MAAM,IAAI,GAAG,CAAC;QAC/B,OAAO,SAAS,IAAI,CAAC,MAAM,KAAK;IAClC,EAAE,OAAO,OAAO;QACd,OAAO;IACT;AACF"}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/components/EmergencyOverlay.tsx"],"sourcesContent":["import { AlertTriangle, Phone } from 'lucide-react';\n\ninterface Props {\n  active: boolean;\n  onClose: () => void;\n}\n\nexport default function EmergencyOverlay({ active, onClose }: Props) {\n  if (!active) return null;\n\n  return (\n    <div className=\"fixed inset-0 z-50 bg-red-600 animate-pulse flex flex-col items-center justify-center text-white p-8\">\n      \n      {/* Blinking Icon */}\n      <div className=\"bg-white text-red-600 rounded-full p-6 mb-6 animate-bounce\">\n        <AlertTriangle size={64} strokeWidth={3} />\n      </div>\n\n      <h1 className=\"text-5xl font-black mb-4 text-center uppercase tracking-widest\">\n        Medical Emergency Detected\n      </h1>\n      \n      <p className=\"text-2xl mb-8 text-center max-w-2xl font-semibold\">\n        Your symptoms indicate a critical condition. Please seek immediate professional help.\n      </p>\n\n      {/* Action Buttons */}\n      <div className=\"flex gap-6 flex-col md:flex-row w-full max-w-lg\">\n        <button \n          onClick={() => window.open('tel:112')} \n          className=\"flex-1 bg-white text-red-700 py-6 rounded-xl text-2xl font-bold flex items-center justify-center gap-3 hover:bg-gray-100 transition shadow-xl\"\n        >\n          <Phone size={32} />\n          Call Ambulance\n        </button>\n        \n        <button \n          onClick={() => window.open('https://www.google.com/maps/search/hospitals+near+me', '_blank')}\n          className=\"flex-1 bg-red-800 border-2 border-white text-white py-6 rounded-xl text-2xl font-bold flex items-center justify-center hover:bg-red-900 transition shadow-xl\"\n        >\n          Find Hospital\n        </button>\n      </div>\n\n      <button \n        onClick={onClose}\n        className=\"mt-12 text-white/70 hover:text-white underline\"\n      >\n        I am safe, dismiss alert\n      </button>\n    </div>\n  );\n}"],"names":[],"mappings":";;;;;AAAA;AAAA;;;AAOe,SAAS,iBAAiB,EAAE,MAAM,EAAE,OAAO,EAAS;IACjE,IAAI,CAAC,QAAQ,OAAO;IAEpB,qBACE,6LAAC;QAAI,WAAU;;0BAGb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,4OAAa;oBAAC,MAAM;oBAAI,aAAa;;;;;;;;;;;0BAGxC,6LAAC;gBAAG,WAAU;0BAAiE;;;;;;0BAI/E,6LAAC;gBAAE,WAAU;0BAAoD;;;;;;0BAKjE,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC;wBAC3B,WAAU;;0CAEV,6LAAC,gNAAK;gCAAC,MAAM;;;;;;4BAAM;;;;;;;kCAIrB,6LAAC;wBACC,SAAS,IAAM,OAAO,IAAI,CAAC,wDAAwD;wBACnF,WAAU;kCACX;;;;;;;;;;;;0BAKH,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAKP;KA7CwB"}},
    {"offset": {"line": 289, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/components/HealthDrawer.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useState } from 'react';\nimport { X, Droplets, Pill, Syringe, CalendarHeart, Plus, Trash2, CheckCircle2, Circle, User, MessageSquare, History, Activity } from 'lucide-react';\nimport { useUserStore } from '@/lib/store/userStore';\n\n// Define Message Type locally for props\ntype Message = {\n  role: 'user' | 'bot';\n  content: string;\n};\n\ninterface Props {\n  isOpen: boolean;\n  onClose: () => void;\n  chatHistory: Message[]; \n}\n\nexport default function HealthDrawer({ isOpen, onClose, chatHistory }: Props) {\n  const { profile, trackers, addWater, addMed, toggleMed, removeMed, addVaccine, removeVaccine, getWaterGoal, checkDailyReset } = useUserStore();\n  \n  const [newMed, setNewMed] = useState('');\n  const [newVac, setNewVac] = useState('');\n  const [activeTab, setActiveTab] = useState<'trackers' | 'history'>('trackers'); \n\n  // Check for new day reset whenever drawer opens\n  useEffect(() => {\n    if (isOpen) checkDailyReset();\n  }, [isOpen, checkDailyReset]);\n\n  if (!isOpen) return null;\n\n  // Calculate Water Progress\n  const dailyGoal = getWaterGoal(); \n  const percentage = Math.min((trackers.water / dailyGoal) * 100, 100);\n\n  return (\n    <div className=\"fixed inset-0 z-50 flex justify-end\">\n      {/* Backdrop */}\n      <div className=\"absolute inset-0 bg-black/30 backdrop-blur-sm\" onClick={onClose}></div>\n      \n      {/* Drawer Panel */}\n      <div className=\"relative w-full max-w-md bg-white h-full shadow-2xl flex flex-col animate-in slide-in-from-right duration-300\">\n        \n        {/* Header */}\n        <div className=\"p-6 border-b flex justify-between items-center bg-gray-50\">\n          <div className=\"flex items-center gap-3\">\n            <div className=\"bg-blue-100 p-2 rounded-full text-blue-600\">\n                <Activity size={20} />\n            </div>\n            <div>\n                <h2 className=\"text-xl font-bold text-gray-900\">Health Hub</h2>\n                <p className=\"text-xs text-gray-500\">{profile.name} â€¢ {profile.age}y â€¢ {profile.weight}kg</p>\n            </div>\n          </div>\n          <button onClick={onClose} className=\"p-2 hover:bg-white rounded-full transition\"><X size={24} /></button>\n        </div>\n\n        {/* Tabs */}\n        <div className=\"flex border-b bg-white sticky top-0 z-10\">\n            <button \n                onClick={() => setActiveTab('trackers')}\n                className={`flex-1 py-4 text-sm font-bold transition-colors ${activeTab === 'trackers' ? 'text-blue-600 border-b-2 border-blue-600 bg-blue-50/50' : 'text-gray-500 hover:bg-gray-50'}`}\n            >\n                Daily Trackers\n            </button>\n            <button \n                onClick={() => setActiveTab('history')}\n                className={`flex-1 py-4 text-sm font-bold transition-colors ${activeTab === 'history' ? 'text-blue-600 border-b-2 border-blue-600 bg-blue-50/50' : 'text-gray-500 hover:bg-gray-50'}`}\n            >\n                History & Profile\n            </button>\n        </div>\n\n        {/* Content Area */}\n        <div className=\"flex-1 overflow-y-auto p-6 space-y-8 bg-white\">\n          \n          {/* === TAB 1: TRACKERS === */}\n          {activeTab === 'trackers' && (\n            <div className=\"space-y-6 animate-in fade-in\">\n                \n                {/* 1. Water Tracker */}\n                <div className=\"bg-blue-50 p-5 rounded-2xl border border-blue-100 shadow-sm\">\n                    <div className=\"flex justify-between items-start mb-2\">\n                    <div className=\"flex items-center gap-2 text-blue-800 font-bold\"><Droplets size={20} /> Hydration</div>\n                    <div className=\"text-right\">\n                        <span className=\"text-3xl font-black text-blue-600\">{trackers.water}</span>\n                        <span className=\"text-sm text-blue-400 font-medium\"> / {dailyGoal}ml</span>\n                    </div>\n                    </div>\n                    \n                    {/* Progress Bar */}\n                    <div className=\"w-full bg-blue-200 h-2 rounded-full mb-4 overflow-hidden\">\n                        <div className=\"bg-blue-600 h-full transition-all duration-500\" style={{ width: `${percentage}%` }}></div>\n                    </div>\n                    \n                    <button onClick={() => addWater(250)} className=\"w-full bg-blue-600 text-white py-2.5 rounded-xl font-medium hover:bg-blue-700 flex items-center justify-center gap-2 transition shadow-blue-200 shadow-md\">\n                        <Plus size={18} /> Add Glass (250ml)\n                    </button>\n                </div>\n\n                {/* 2. Medication Checklist */}\n                <div className=\"bg-red-50 p-5 rounded-2xl border border-red-100 shadow-sm\">\n                    <div className=\"flex items-center justify-between text-red-800 font-bold mb-4\">\n                        <div className=\"flex items-center gap-2\"><Pill size={20} /> Daily Meds</div>\n                        <span className=\"text-xs font-normal bg-white px-2 py-1 rounded border border-red-100 text-red-400\">Resets Daily</span>\n                    </div>\n                    \n                    <ul className=\"space-y-2 mb-4\">\n                        {trackers.meds.length === 0 ? <li className=\"text-gray-400 italic text-sm text-center py-2\">No meds added yet.</li> : \n                        trackers.meds.map((m) => {\n                            // Safety Check for old data format\n                            if (typeof m !== 'object' || !m) return null;\n                            \n                            return (\n                            <li key={m.id} className={`flex items-center justify-between p-3 rounded-xl border transition-all ${m.taken ? 'bg-green-50 border-green-200' : 'bg-white border-red-100 hover:border-red-200'}`}>\n                                <button onClick={() => toggleMed(m.id)} className=\"flex items-center gap-3 flex-1 text-left\">\n                                    {m.taken ? <CheckCircle2 className=\"text-green-600\" size={22} /> : <Circle className=\"text-gray-300\" size={22} />}\n                                    <span className={`text-sm font-medium ${m.taken ? 'text-green-800 line-through decoration-green-800/50' : 'text-gray-800'}`}>{m.name}</span>\n                                </button>\n                                <button onClick={() => removeMed(m.id)} className=\"text-gray-300 hover:text-red-500 transition\"><Trash2 size={16} /></button>\n                            </li>\n                        )})}\n                    </ul>\n                    \n                    <div className=\"flex gap-2\">\n                        <input \n                            type=\"text\" placeholder=\"Add medication...\" className=\"flex-1 text-sm p-3 border border-red-100 rounded-xl outline-none focus:border-red-300\" \n                            value={newMed} onChange={(e) => setNewMed(e.target.value)} \n                            onKeyDown={(e) => e.key === 'Enter' && newMed && (addMed(newMed), setNewMed(''))} \n                        />\n                        <button onClick={() => { if(newMed) { addMed(newMed); setNewMed(''); }}} className=\"bg-red-600 text-white p-3 rounded-xl hover:bg-red-700 transition shadow-red-200 shadow-md\">\n                            <Plus size={20} />\n                        </button>\n                    </div>\n                </div>\n\n                {/* 3. Vaccines */}\n                <div className=\"bg-green-50 p-5 rounded-2xl border border-green-100 shadow-sm\">\n                    <div className=\"flex items-center gap-2 text-green-800 font-bold mb-4\"><Syringe size={20} /> Vaccines</div>\n                    <ul className=\"space-y-2 mb-4\">\n                        {trackers.vaccines.length === 0 ? <li className=\"text-gray-400 italic text-sm text-center py-2\">No records.</li> : \n                        trackers.vaccines.map((v) => (\n                        <li key={v} className=\"flex justify-between items-center text-sm text-green-800 bg-white p-3 rounded-xl border border-green-100\">\n                            <div className=\"flex items-center gap-2\"><CheckCircle2 size={16} className=\"text-green-500\"/> {v}</div>\n                            <button onClick={() => removeVaccine(v)} className=\"text-gray-300 hover:text-red-500 transition\"><Trash2 size={16} /></button>\n                        </li>\n                        ))}\n                    </ul>\n                    <div className=\"flex gap-2\">\n                        <input \n                            type=\"text\" placeholder=\"Add vaccine...\" className=\"flex-1 text-sm p-3 border border-green-100 rounded-xl outline-none focus:border-green-300\" \n                            value={newVac} onChange={(e) => setNewVac(e.target.value)} \n                            onKeyDown={(e) => e.key === 'Enter' && newVac && (addVaccine(newVac), setNewVac(''))} \n                        />\n                        <button onClick={() => { if(newVac) { addVaccine(newVac); setNewVac(''); }}} className=\"bg-green-600 text-white p-3 rounded-xl hover:bg-green-700 transition shadow-green-200 shadow-md\">\n                            <Plus size={20} />\n                        </button>\n                    </div>\n                </div>\n\n                {/* 4. Period (Conditional) */}\n                {profile.gender === 'Female' && (\n                    <div className=\"bg-pink-50 p-5 rounded-2xl border border-pink-100 shadow-sm\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                            <div className=\"flex items-center gap-2 text-pink-800 font-bold\"><CalendarHeart size={20} /> Cycle Tracker</div>\n                            <span className=\"text-xs font-medium text-pink-500 bg-white px-2 py-1 rounded-full border border-pink-100\">Last Start Date</span>\n                        </div>\n                        <div className=\"text-3xl font-black text-pink-600\">{trackers.periodDate || '--/--'}</div>\n                    </div>\n                )}\n            </div>\n          )}\n\n          {/* === TAB 2: HISTORY === */}\n          {activeTab === 'history' && (\n            <div className=\"space-y-6 animate-in fade-in\">\n                \n                {/* User Profile Card */}\n                <div className=\"bg-purple-50 p-5 rounded-2xl border border-purple-100 shadow-sm\">\n                    <h3 className=\"font-bold text-purple-900 mb-4 flex items-center gap-2 border-b border-purple-200 pb-3\">\n                        <User size={20} /> Medical Profile\n                    </h3>\n                    <div className=\"space-y-3 text-sm\">\n                        <div className=\"flex justify-between border-b border-purple-100 pb-2\"><span className=\"text-purple-600\">Patient Name:</span> <span className=\"font-bold text-purple-900\">{profile.name}</span></div>\n                        <div className=\"flex justify-between border-b border-purple-100 pb-2\"><span className=\"text-purple-600\">Weight:</span> <span className=\"font-bold text-purple-900\">{profile.weight} kg</span></div>\n                        <div className=\"flex justify-between border-b border-purple-100 pb-2\"><span className=\"text-purple-600\">Diabetes Status:</span> <span className=\"font-bold text-purple-900\">{profile.isDiabetic}</span></div>\n                        <div className=\"flex justify-between border-b border-purple-100 pb-2\"><span className=\"text-purple-600\">Hypertension:</span> <span className=\"font-bold text-purple-900\">{profile.hasHypertension}</span></div>\n                        <div className=\"mt-2\">\n                            <span className=\"text-purple-600 block mb-2 font-medium\">Other Conditions:</span>\n                            <div className=\"bg-white p-3 rounded-xl border border-purple-100 text-purple-800 text-xs leading-relaxed\">\n                                {profile.existingConditions || \"No other conditions reported.\"}\n                            </div>\n                        </div>\n                    </div>\n                </div>\n\n                {/* Chat Logs */}\n                <div className=\"bg-gray-50 p-5 rounded-2xl border border-gray-200 shadow-sm\">\n                    <h3 className=\"font-bold text-gray-700 mb-4 flex items-center gap-2\">\n                        <History size={20} /> Current Session Log\n                    </h3>\n                    <div className=\"space-y-3 max-h-[400px] overflow-y-auto pr-2 custom-scrollbar\">\n                        {chatHistory.length <= 1 ? (\n                            <p className=\"text-xs text-gray-400 italic text-center py-4\">No conversation yet.</p>\n                        ) : (\n                            chatHistory.slice(1).map((m, i) => ( // Skip initial greeting\n                                <div key={i} className={`text-xs p-3 rounded-xl border relative ${m.role === 'user' ? 'bg-white border-blue-200 ml-4' : 'bg-gray-100 border-gray-200 mr-4'}`}>\n                                    <div className={`font-bold mb-1 uppercase text-[10px] tracking-wide ${m.role === 'user' ? 'text-blue-500 text-right' : 'text-gray-500'}`}>\n                                        {m.role === 'user' ? 'You' : 'Pranaya'}\n                                    </div>\n                                    <div className=\"text-gray-700 leading-relaxed\">\n                                        {/* Strip HTML tags for clean log view */}\n                                        {m.content.replace(/<[^>]*>?/gm, '').substring(0, 150)}\n                                        {m.content.length > 150 && '...'}\n                                    </div>\n                                </div>\n                            ))\n                        )}\n                    </div>\n                </div>\n\n            </div>\n          )}\n\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///Users/soulima01/Pranaya-Health-Agent/client/app/dashboard/chat/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef, useEffect } from 'react';\nimport { useRouter } from 'next/navigation'; \nimport { useUserStore } from '@/lib/store/userStore'; \nimport { sendChatMessage } from '@/lib/api';\nimport EmergencyOverlay from '@/app/components/EmergencyOverlay';\nimport HealthDrawer from '@/app/components/HealthDrawer'; \nimport { Send, Activity, Check, X, ClipboardCheck, LayoutDashboard, Paperclip, FileImage, Mic, MicOff, Volume2, Keyboard, Sparkles } from 'lucide-react';\n\n// --- ðŸ¤– AVATAR COMPONENT ---\nconst AvatarPanel = ({ \n  isSpeaking, \n  isListening, \n  isTyping\n}: { \n  isSpeaking: boolean; \n  isListening: boolean;\n  isTyping: boolean;\n}) => {\n  \n  const VIDEO_TALK = \"/videos/avatar-talk.mp4\"; \n  const IMG_STATIC = \"/videos/avatar-static.png\"; \n\n  return (\n    <div className=\"h-full flex flex-col p-6 bg-white relative overflow-hidden\">\n      <div className=\"mb-6 text-center z-10\">\n        <h2 className=\"text-2xl font-bold text-gray-800 tracking-tight\">Pranaya AI</h2>\n        <div className=\"flex justify-center items-center gap-2 mt-2\">\n            <span className={`w-2 h-2 rounded-full ${isSpeaking ? 'bg-green-500 animate-pulse' : 'bg-green-500'}`}></span>\n            <span className=\"text-sm text-green-600 font-medium\">Active Companion</span>\n        </div>\n      </div>\n      <div className=\"flex-1 w-full bg-gray-50 rounded-3xl overflow-hidden relative shadow-inner border border-gray-100\">\n        {isSpeaking ? (\n            <video key=\"talk\" src={VIDEO_TALK} autoPlay loop muted playsInline className=\"w-full h-full object-cover animate-in fade-in duration-300\" />\n        ) : (\n            <img src={IMG_STATIC} alt=\"Avatar Idle\" className=\"w-full h-full object-cover animate-in fade-in duration-300\" />\n        )}\n        <div className=\"absolute bottom-6 left-0 right-0 flex justify-center\">\n            <div className=\"bg-black/60 backdrop-blur-md text-white px-6 py-2 rounded-full flex items-center gap-3 shadow-lg transition-all duration-300\">\n                {isListening ? <><Mic size={18} className=\"text-red-400 animate-pulse\" /><span className=\"font-medium text-sm\">Listening...</span></> : \n                 isSpeaking ? <><Volume2 size={18} className=\"text-green-400 animate-bounce\" /><span className=\"font-medium text-sm\">Speaking...</span></> : \n                 isTyping ? <><Keyboard size={18} className=\"text-blue-400\" /><span className=\"font-medium text-sm\">Watching...</span></> : \n                 <span className=\"text-sm text-gray-300\">Idle</span>}\n            </div>\n        </div>\n      </div>\n      <div className=\"mt-6 text-center\">\n        <p className=\"text-blue-800 text-sm font-medium bg-blue-50 py-3 px-4 rounded-xl inline-block border border-blue-100\">\"I'm here.\"</p>\n      </div>\n    </div>\n  );\n};\n\ntype Message = {\n  role: 'user' | 'bot';\n  content: string;\n  type?: 'text' | 'diagnosis' | 'emergency' | 'myth' | 'tracker_log'; \n  data?: any; \n  image?: string; \n};\n\nexport default function ChatPage() {\n  const router = useRouter();\n  const { profile, addWater, addMed, toggleMed, addVaccine, setPeriodDate } = useUserStore();\n\n  const [input, setInput] = useState('');\n  const [selectedImage, setSelectedImage] = useState<string | null>(null);\n  \n  const [messages, setMessages] = useState<Message[]>([\n    { role: 'bot', content: `Namaste ${profile.name}! I am Pranaya. I'm listening.` }\n  ]);\n  const [loading, setLoading] = useState(false);\n  \n  // --- ðŸŸ¢ NEW: NUDGES STATE ---\n  const [suggestions, setSuggestions] = useState<string[]>([]);\n\n  const [isEmergency, setIsEmergency] = useState(false);\n  const [isDrawerOpen, setIsDrawerOpen] = useState(false); \n\n  const [isListening, setIsListening] = useState(false);\n  const [isSpeaking, setIsSpeaking] = useState(false);\n  const [isTyping, setIsTyping] = useState(false);\n  const [isMuted, setIsMuted] = useState(false);\n\n  const messagesEndRef = useRef<HTMLDivElement>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n  const typingTimeoutRef = useRef<NodeJS.Timeout | null>(null);\n\n  useEffect(() => {\n    if (!profile.isAssessmentDone) router.push('/assessment');\n  }, [profile.isAssessmentDone, router]);\n\n  const scrollToBottom = () => { messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" }); };\n  useEffect(() => { scrollToBottom(); }, [messages]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setInput(e.target.value);\n    setIsTyping(true);\n    if (typingTimeoutRef.current) clearTimeout(typingTimeoutRef.current);\n    typingTimeoutRef.current = setTimeout(() => { setIsTyping(false); }, 1500);\n  };\n\n  const startListening = () => {\n    if ('webkitSpeechRecognition' in window) {\n      speak(\"Go ahead, describe your problems. I am listening.\");\n      setTimeout(() => {\n          const recognition = new (window as any).webkitSpeechRecognition();\n          recognition.continuous = false;\n          recognition.lang = 'en-US'; \n          recognition.interimResults = false;\n          recognition.onstart = () => setIsListening(true);\n          recognition.onend = () => setIsListening(false);\n          recognition.onresult = (event: any) => {\n            const transcript = event.results[0][0].transcript;\n            setInput(transcript);\n          };\n          recognition.start();\n      }, 2500); \n    } else {\n      alert(\"Voice input is not supported in this browser.\");\n    }\n  };\n\n  const speak = (text: string) => {\n    if (isMuted || !text) return;\n    const cleanText = text.replace(/<[^>]*>?/gm, '').replace(/[*#]/g, '');\n    window.speechSynthesis.cancel();\n    const utterance = new SpeechSynthesisUtterance(cleanText);\n    const voices = window.speechSynthesis.getVoices();\n    const preferredVoice = voices.find(v => v.name.includes('Samantha') || v.name.includes('Google UK English Female') || v.name.includes('Microsoft Zira')) || voices[0];\n    if (preferredVoice) utterance.voice = preferredVoice;\n    utterance.pitch = 1.05; utterance.rate = 1.0; \n    utterance.onstart = () => setIsSpeaking(true);\n    utterance.onend = () => setIsSpeaking(false);\n    window.speechSynthesis.speak(utterance);\n  };\n\n  const handleFileSelect = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const file = e.target.files?.[0];\n    if (file) {\n        const reader = new FileReader();\n        reader.onloadend = () => setSelectedImage(reader.result as string);\n        reader.readAsDataURL(file);\n    }\n  };\n\n  const handleSend = async (manualInput?: string) => {\n    const textToSend = manualInput || input;\n    if (!textToSend.trim() && !selectedImage) return;\n    \n    const userMsg = textToSend;\n    const imageToSend = selectedImage; \n    \n    setInput('');\n    setSuggestions([]); // Clear old suggestions\n    setIsTyping(false);\n    setSelectedImage(null);\n    window.speechSynthesis.cancel();\n    setIsSpeaking(false);\n\n    const userContextString = `[PROFILE] Name:${profile.name}, Age:${profile.age}, Weight:${profile.weight}, Gender:${profile.gender}, Diabetic:${profile.isDiabetic}`;\n    const historyContext = messages.map(m => `${m.role === 'user' ? 'User' : 'Bot'}: ${m.content}`);\n    const fullContext = [userContextString, ...historyContext];\n    \n    setMessages(prev => [...prev, { role: 'user', content: userMsg || \"Analyzed this image:\", image: imageToSend || undefined }]);\n    setLoading(true);\n\n    const response = await sendChatMessage(userMsg, \"guest\", fullContext, profile.gender, imageToSend);\n    setLoading(false);\n\n    if (response) {\n      // --- ðŸŸ¢ CATCH NUDGES ---\n      if (response.suggestions && Array.isArray(response.suggestions)) {\n        setSuggestions(response.suggestions);\n      }\n\n      let botReplyText = \"\"; \n\n      if (response.routed_to === 'tracker') {\n          const data = response.response?.data; \n          if (data) {\n              if (data.category === 'water') {\n                 let amount = 250;\n                 if (data.quantity) {\n                     const parsed = parseInt(data.quantity.toString().replace(/\\D/g, ''));\n                     if (!isNaN(parsed)) amount = parsed;\n                 }\n                 addWater(amount);\n              }\n              if (data.category === 'medicine') {\n                 const medName = data.item || 'Medicine';\n                 const currentMeds = useUserStore.getState().trackers.meds || [];\n                 const existingMed = currentMeds.find(m => typeof m === 'object' && m.name && m.name.toLowerCase().includes(medName.toLowerCase()));\n                 if (existingMed) toggleMed(existingMed.id, true); \n                 else addMed(medName); \n              }\n              if (data.category === 'vaccine') addVaccine(data.item || 'Vaccine');\n              if (data.category === 'period') {\n                 const dateToLog = data.item || 'Today';\n                 setPeriodDate(dateToLog);\n              }\n              botReplyText = response.response.message || \"Logged successfully.\";\n              setMessages(prev => [...prev, { role: 'bot', content: botReplyText, type: 'tracker_log' }]);\n          } else {\n              botReplyText = \"I've noted that down.\";\n              setMessages(prev => [...prev, { role: 'bot', content: botReplyText }]);\n          }\n      }\n      else if (response.routed_to === 'emergency') {\n        setIsEmergency(true);\n        botReplyText = response.response.message;\n        setMessages(prev => [...prev, { role: 'bot', content: botReplyText, type: 'emergency' }]);\n        new Audio('/siren.mp3').play().catch(e => console.log(e));\n      } \n      else if (response.routed_to === 'diagnosis') {\n        const report = response.response.data;\n        botReplyText = `Here is my analysis. ${report.immediate_advice}`;\n        setMessages(prev => [...prev, { role: 'bot', content: report.immediate_advice, type: 'diagnosis', data: report }]);\n      } \n      else if (response.routed_to === 'myth_buster') {\n        const factCheck = response.response.data;\n        botReplyText = `${factCheck.verdict}. ${factCheck.explanation}`;\n        setMessages(prev => [...prev, { role: 'bot', content: factCheck.explanation, type: 'myth', data: factCheck }]);\n      }\n      else {\n        botReplyText = response.response.message;\n        setMessages(prev => [...prev, { role: 'bot', content: botReplyText }]);\n      }\n      speak(botReplyText);\n    }\n  };\n\n  if (!profile.isAssessmentDone) return <div>Loading...</div>;\n\n  return (\n    <div className=\"h-screen bg-gray-50 flex flex-col overflow-hidden relative\">\n      <EmergencyOverlay active={isEmergency} onClose={() => setIsEmergency(false)} />\n      <HealthDrawer isOpen={isDrawerOpen} onClose={() => setIsDrawerOpen(false)} chatHistory={messages} />\n      \n      <div className=\"p-4 bg-white border-b flex items-center justify-between shadow-sm z-20 shrink-0\">\n        <h1 className=\"font-bold text-xl text-blue-600 flex items-center gap-2\"><Activity className=\"w-6 h-6\" /> Pranaya</h1>\n        <div className=\"flex items-center gap-3\">\n            <button onClick={() => setIsMuted(!isMuted)} className=\"p-2 text-gray-500 hover:bg-gray-100 rounded-full\">{isMuted ? <Volume2 size={20}/> : <Volume2 size={20}/>}</button>\n            <button onClick={() => setIsDrawerOpen(true)} className=\"bg-blue-100 text-blue-700 px-4 py-2 rounded-xl font-bold text-sm flex items-center gap-2 hover:bg-blue-200 transition\"><LayoutDashboard size={18} /> My Health Data</button>\n        </div>\n      </div>\n\n      <div className=\"flex flex-1 overflow-hidden w-full\">\n        <div className=\"w-[65%] flex flex-col relative border-r border-gray-200\">\n            <div className=\"flex-1 overflow-y-auto p-6 space-y-6 pb-32\">\n                {messages.map((m, i) => (\n                <div key={i} className={`flex ${m.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n                    <div className={`max-w-[90%] p-4 rounded-2xl shadow-sm ${m.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white border rounded-bl-none text-gray-800'}`}>\n                    {m.image && <img src={m.image} alt=\"Upload\" className=\"max-w-full h-auto rounded-lg mb-2 border border-white/20\" />}\n                    {m.type === 'tracker_log' && <div className=\"flex items-center gap-2 text-green-700 font-bold mb-2 pb-2 border-b border-green-100\"><ClipboardCheck size={20} /> Data Saved</div>}\n                    {m.type === 'myth' && m.data && <div className=\"mb-3 border-b pb-3 font-bold text-lg flex items-center gap-2\">{m.data.verdict === 'FACT' ? <Check className=\"text-green-600\"/> : <X className=\"text-red-600\"/>}{m.data.verdict}</div>}\n                    <div className=\"whitespace-pre-wrap leading-relaxed text-sm [&>h3]:font-bold [&>h3]:text-blue-800 [&>h3]:mt-4 [&>h3]:mb-2 [&>h3]:text-lg [&>ul]:list-disc [&>ul]:pl-5 [&>ul]:space-y-1 [&>b]:font-black\" dangerouslySetInnerHTML={{ __html: m.content }} />\n                    {m.type === 'diagnosis' && m.data && (\n                        <div className=\"mt-4 bg-blue-50 rounded-xl p-3 border border-blue-100\">\n                        <div className=\"font-bold text-blue-800 mb-2\">Potential Conditions:</div>\n                        {m.data.potential_conditions.map((c:any, idx:number) => (\n                            <div key={idx} className=\"bg-white p-3 rounded mb-3 text-sm border border-blue-100 shadow-sm\">\n                                <div className=\"flex justify-between items-center mb-2\">\n                                    <span className=\"font-bold text-base\">{idx+1}. {c.name}</span>\n                                    <span className={`text-xs px-2 py-1 rounded font-bold ${c.likelihood === 'High' ? 'bg-red-100 text-red-700' : c.likelihood === 'Medium' ? 'bg-yellow-100 text-yellow-700' : 'bg-green-100 text-green-700'}`}>{c.likelihood}</span>\n                                </div>\n                                <p className=\"text-gray-700 leading-relaxed\">{c.reasoning}</p>\n                            </div>\n                        ))}\n                        </div>\n                    )}\n                    </div>\n                </div>\n                ))}\n                {loading && <div className=\"text-gray-400 text-sm ml-4 animate-pulse\">Pranaya is processing...</div>}\n                <div ref={messagesEndRef} />\n            </div>\n\n            {/* Input Area with Suggestions */}\n            <div className=\"p-4 bg-white border-t z-20\">\n                {/* --- ðŸŸ¢ SUGGESTIONS BAR --- */}\n                {suggestions.length > 0 && (\n                  <div className=\"flex gap-2 mb-3 overflow-x-auto pb-1 no-scrollbar\">\n                    <div className=\"flex items-center text-xs font-bold text-blue-600 mr-2\"><Sparkles size={14} /> Suggested:</div>\n                    {suggestions.map((s, i) => (\n                      <button \n                        key={i} \n                        onClick={() => handleSend(s)}\n                        className=\"whitespace-nowrap px-4 py-1.5 bg-blue-50 text-blue-700 text-xs font-medium rounded-full border border-blue-100 hover:bg-blue-100 transition active:scale-95\"\n                      >\n                        {s}\n                      </button>\n                    ))}\n                  </div>\n                )}\n\n                {selectedImage && (\n                    <div className=\"flex items-center gap-2 bg-gray-100 p-2 rounded-lg mb-2 max-w-fit\">\n                        <FileImage size={20} className=\"text-blue-600\" />\n                        <span className=\"text-xs text-gray-600\">Image attached</span>\n                        <button onClick={() => setSelectedImage(null)} className=\"ml-2 text-gray-400 hover:text-red-500\"><X size={16}/></button>\n                    </div>\n                )}\n                <div className=\"flex gap-2 items-center\">\n                    <input type=\"file\" ref={fileInputRef} onChange={handleFileSelect} accept=\"image/*\" className=\"hidden\" />\n                    <button onClick={() => fileInputRef.current?.click()} className=\"p-3 bg-gray-100 text-gray-600 rounded-xl hover:bg-gray-200\"><Paperclip size={20} /></button>\n                    <button onClick={startListening} className={`p-3 rounded-xl ${isListening ? 'bg-red-500 text-white animate-pulse' : 'bg-gray-100 text-gray-600'}`}>{isListening ? <MicOff size={20} /> : <Mic size={20} />}</button>\n                    <input type=\"text\" value={input} onChange={handleInputChange} onKeyDown={(e) => e.key === 'Enter' && handleSend()} placeholder=\"Type or speak...\" className=\"flex-1 p-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 bg-gray-50\" />\n                    <button onClick={() => handleSend()} disabled={loading} className=\"p-3 bg-blue-600 text-white rounded-xl\"><Send size={24} /></button>\n                </div>\n            </div>\n        </div>\n\n        <div className=\"w-[35%] bg-white h-full\">\n            <AvatarPanel isSpeaking={isSpeaking} isListening={isListening} isTyping={isTyping} />\n        </div>\n      </div>\n    </div>\n  );\n}"],"names":[],"mappings":"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"}}]
}